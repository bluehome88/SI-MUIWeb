!function(q){"use strict";var t=window.CandyFAQ,w=t.i18n,x=t.ajaxPrefix,y=(t.platform,t.settings);function C(e){return e.nonce_key=t.nonce.nonceKey,e.nonce_value=t.nonce.nonce,e}function T(e,t,n,a){window.ga&&"function"==typeof window.ga&&ga("send","event",e,t,n,a,{nonInteraction:!0})}t.info,String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0==a)return!1;var i,s,t=0|t,f=Math.max(0<=t?t:a-Math.abs(t),0);for(;f<a;){if((i=n[f])===(s=e)||"number"==typeof i&&"number"==typeof s&&isNaN(i)&&isNaN(s))return!0;f++}return!1}});var E=t.ajaxUrl,n=(q("html, body"),q("#wpadminbar")),N=(n.length&&n.height(),{});function a(d){return function(e){e.preventDefault();var t=q(e.currentTarget),n=t.parents(".fn-kscf-answer-extra"),a=n.parents(".fn-kscf-faq"),i=t.parents(".fn-kscf-rating"),s=t.parents(".fn-kscf-rating-item"),f=n.data("id"),r=n.data("title"),e=s.find(".fn-kscf-rating-count"),t=parseInt(e.text().trim()||0),c=a.data("showLikeMsg"),l=a.data("showDislikeMsg"),o=a.data("feedbackMode");f&&!i.hasClass("kscf-voted")&&(i.addClass("kscf-voted"),e.text(++t),s.removeClass("kscf-rating-item--no-votes"),q.ajax({method:"POST",url:E,dataType:"json",data:C({action:d.action,id:f})}).done(function(){d.trackRating&&T(y[d.trackPrefix+"category"],y[d.trackPrefix+"action"],"article_title"===y[d.trackPrefix+"label"]?r:f,y[d.trackPrefix+"value"]||0),("like"===d.mode&&c||"dislike"===d.mode&&l)&&i.html(q('<div class="kscf-rating-message">'+d.messageText+"</div>")),o!==d.mode&&"any"!==o||n.find(".fn-kscf-answer-feedback-container").append(q('<div class="kscf-feedback-form kscf-feedback-form--no-content fn-kscf-feedback-form"><div class="kscf-feedback-form__title">'+w.feedback_label+'</div><div class="kscf-feedback-form__message"><textarea class="kscf-feedback-form__message-input fn-kscf-feedback-val" rows="5"></textarea>'+(w.feedback_info_text?'<div class="kscf-feedback-form__info">'+w.feedback_info_text+"</div>":"")+'</div><div class="kscf-feedback-form__submit"><a href="#" class="fn-kscf-feedback-submit">'+w.feedback_submit_label+"</a></div></div>"))}))}}function i(){q(".fn-kscf-answer-feedback-container").each(function(e,t){var a=q(t),t=a.parents(".fn-kscf-answer-extra"),i=t.data("id"),s=t.data("title");a.on("click",".fn-kscf-feedback-submit",function(e){var t=q(e.currentTarget),n=t.parents(".fn-kscf-feedback-form").find(".fn-kscf-feedback-val");e.preventDefault(),i&&n.val()&&(t.text(w.feedback_submit_request_label).attr("disabled","disabled"),q.ajax({method:"POST",url:E,dataType:"json",data:C({action:x+"_article_feedback",id:i,content:n.val()})}).done(function(){y.track_article_feedback&&T(y.ga_feedback_category,y.ga_feedback_action,"article_title"===y.ga_feedback_label?s:i,y.ga_feedback_value||0),a.html('<div class="kscf-feedback-sent-message">'+w.feedback_sent_text+"</div>")}))}),a.on("input",".fn-kscf-feedback-val",function(e){a.find(".fn-kscf-feedback-form").toggleClass("kscf-feedback-form--no-content",Boolean(q(e.currentTarget).val()<1))})})}function s(){var v="mkb-faq-item-hidden",p="kscf-faq-question--open",e=q(".fn-kscf-faq");e.length&&e.each(function(e,t){var n,i=q(t),a=i.find(".fn-kscf-faq-filter"),s=a.find(".fn-kscf-faq-filter-input"),t=i.find(".fn-kscf-faq-category"),f=i.find(".fn-kscf-faq-no-results"),r=Boolean(i.data("toggle")),c=[].map.call(t,function(e){var t=q(e),n=t.find(".fn-kscf-faq-category-count"),e=[].map.call(t.find(".fn-kscf-faq-item"),function(e){e=q(e);return{$el:e,question:e.find(".fn-kb-faq-question").text().trim().toLowerCase(),answer:e.find(".fn-kscf-faq-answer").text().trim().toLowerCase(),isVisible:!0}});return{$el:t,$countEl:n.length?n:null,items:e,visible:[].map.call(e,function(e){return q(e)}),hidden:[]}});function l(e,t){return(t=t.trim())?e.concat(-1!==t.indexOf("-")?function(e,t){if(e=parseInt(e),t=parseInt(t),e<0||t<0||t<e)return[];for(var n=[];e<=t;e++)n.push(e);return n}.apply(this,t.split("-")):parseInt(t)):e}function o(e){return e.trim().split(",").reduce(l,[])}var d=null;function u(n){n=n||g;var e,a=0;c.forEach(function(t){t.visible=[],t.hidden=[],t.items.forEach(function(e){t[(e.isVisible=n(e))?"visible":"hidden"].push(e)}),a+=t.visible.length}),f.toggleClass("ks-hidden",0<a),c.forEach(function(e){var t;e.visible.forEach(function(e){e.$el.removeClass(v)}),e.hidden.forEach(function(e){e.$el.addClass(v)}),e.$countEl&&e.$countEl.html(e.visible.length+" "+(t=e.visible.length,y.faq_enable_advanced_plurals?(d=d||{singularNumbers:o(y.questions_singular_numbers),plural1stNumbers:o(y.questions_pl1_numbers),plural2ndNumbers:o(y.questions_pl2_numbers)},1===t||d.singularNumbers.length&&d.singularNumbers.includes(t)?w.question:(!d.plural2ndNumbers.length||!d.plural2ndNumbers.includes(t))&&(!d.plural1stNumbers.length||d.plural2ndNumbers.length||d.plural1stNumbers.includes(t))?w.questions:w.questions_p2):1===t?w.question:w.questions)),e.$el.toggleClass("mkb-faq-section-hidden",!e.visible.length),e.visible=[],e.hidden=[]}),!y.faq_filter_open_single||1!==a||(e=i.find(".fn-kscf-faq-item:not(."+v+")")).length&&!e.hasClass(p)&&b(e)}var k=u.bind(this,function(){return!0});function g(e){return-1!==e.question.indexOf(n)||-1!==e.answer.indexOf(n)}a.length&&(i.on("input",".fn-kscf-faq-filter-input",function(e){if((e=(e.currentTarget.value||"").trim()).length<3)return a.addClass("kscf-faq-filter--empty"),n="",k(),void s.focus();a.removeClass("kscf-faq-filter--empty"),n=e.toLowerCase(),u()}),i.on("click",".fn-kscf-faq-filter-clear",function(e){e.preventDefault(),s.val("").trigger("input")}));var m="slow"===i.data("anim")?400:100;function _(e){return Array.prototype.reduce.call(e.childNodes,function(e,t){return e+(t.offsetHeight||0)},0)}function b(e,t,n){var a,i,s,f;e.hasClass(p)||(i=_((a=e.find(".fn-kscf-faq-answer")).get(0)),s=e.data("id"),f=e.data("title"),r&&!n&&(c.forEach(function(e){e.items.forEach(function(e){h(e.$el)})}),y.faq_scroll_to_item&&setTimeout(function(){q("html, body").animate({scrollTop:e.offset().top+parseInt(y.faq_scroll_offset)},300)},m+150)),a.animate({maxHeight:i},m,"swing",function(){a.css("max-height","none"),e.addClass(p)}),t||(f=f,N[s=s]||(N[s]=!0,y.track_article_views&&T(y.ga_view_category,y.ga_view_action,"article_title"===y.ga_view_label?f:s,y.ga_view_value||0),q.ajax({method:"POST",url:E,dataType:"json",data:C({action:x+"_answer_view",id:s})}))))}function h(e){var t,n;e.hasClass(p)&&(n=_((t=e.find(".fn-kscf-faq-answer")).get(0)),t.css("max-height",n),t.animate({maxHeight:0},m,"swing",function(){e.removeClass(p)}))}i.on("click",".fn-kscf-faq-item-link",function(e){e.preventDefault(),((e=q(e.currentTarget).parent()).hasClass(p)?h:b)(e)}),i.on("click",".fn-kscf-faq-toggle-all",function(e){e.preventDefault();var t=(e=q(e.currentTarget)).hasClass("kscf-faq-toggle-all__link--open");c.forEach(function(e){e.items.forEach(function(e){t?h(e.$el):b(e.$el,!0,!0)})}),e.toggleClass("kscf-faq-toggle-all__link--open")})})}q(document).ready(function(){var e=q("body");n=q("#wpadminbar"),n.length&&n.height(),e.on("click",".fn-kscf-like",a({mode:"like",action:x+"_article_like",trackRating:y.track_article_likes,trackPrefix:"ga_like_",showMessage:y.show_like_message,messageText:w.like_message_text})),e.on("click",".fn-kscf-dislike",a({mode:"dislike",action:x+"_article_dislike",trackRating:y.track_article_dislikes,trackPrefix:"ga_dislike_",showMessage:y.show_dislike_message,messageText:w.dislike_message_text})),i(),s()})}(jQuery);